---
layout: post
title: "디자인 패턴이란 무엇인가?"
date: 2022-03-12
categories: DesignPattern
---

# 디자인 패턴이란 무엇인가?

스프링과 같은 프레임워크를 깊게 이해하기 위해서는 디자인 패턴에 대한 학습이 필수이다. 이번 포스팅에서는 디자인 패턴이 무엇이고 디자인 패턴의 일반적인 원칙에 대하여 포스팅한다. 

## Glossary

일반적인 IT용어와 조금 다를 수 있는 디자인패턴의 용어를 명시적으로 정의한다.

서버: 객체지향과 관련하여 서버는 참조호출(call by reference)를 당하는 모듈을 의미한다. 

클라이언트: 객체지향과 관련하여 클라이언트는 참조호출(call by reference)을 하는 측 코드를 의미한다.

행동: 객체의 행동을 의미하며 자바에서는 메소드가 해당된다.

인터페이스: 클라이언트 측에서 호출 할때 사용되는 추상화 된 매개체를 의미하며 자바에서는 추상클래스와 인터페이스가 있다.

구상클래스: 인스턴스를 생성 할 수 있는 클래스를 의미한다.

## 1. 배경

작은 규모의 어플리케이션 개발이 주를 이루던 과거에는 c언어와 같은 절자지향언어가 대세였다. 하지만 어플리케이션의 규모가 커짐에 따라 절차지향언어 보다 확장성과 재사용성이 높은 자바와 같은 객체지향언어 주로 사용되게 되었다. 많은 개발자들은 객체지향을 사용하면서 많은 디자인를 등장하였다. 그 중에 합리적인 디자인은 객체지향에서 살아남았고 그렇지 못한 디자인들은 사라지게 되었다. 결국 그렇게 살아남은 디자인들의 비슷한 패턴들을 우리는 디자인 패턴이라고 부르게 되었다. 

## 2. 디자인 패턴의 중요성

어플리케이션은 개발이 시작되기 전부터 끝나고 난 후에도 외부와 연결되어 있다. 어플리케이션이 개발하기 전부터 고객과 개발자가 논의하여 어플리케이션이 모델링되고 개발이 진행 될 때도 특정한 이유(고객의 요구사항이 변경되는 등등) 때문에 모델링이 바뀌기도 한다. 어플리케이션의 개발이 완료 된 후에도 어플리케이션의 상황 혹은 환경이 변경되어 어플리케이션의 특정 부분이 재개발 되기도 한다. 즉 어플리케이션은 항상 변화할 가능성이 존재한다. 이러한 특성상 개발비용을 줄이기 위해 재사용성, 확정성, 유연성이 높은 어플리케이션을 개발하는 것은 상당히 중요하다. 이러한 것을 고려하지 않고 설계한다면 어플리케이션이 변화해야되는 상황에서 변화를 극복하지 못하고 처음부터 다시 개발해야되는 상황이 발생할 수도 있다. 그러므로 그러한 변화의 상황에 대한 시행착오 겪은 디자인 패턴을 학습하여 설계하는 것은 중요하다.

## 3. 디자인 패턴이란 무엇인가?

디자인 패턴이란 항상 변화하는 어플리케이션에 대하여 객체지향의 특성 즉, 확장성, 재사용성, 유연성 등이 높은 어플리케이션을 만들기 위한 설계 패턴이다. 

## 4. 디자인의 일반적 원칙

디자인 패턴이 발달하면서 일반적인 개발 원칙들이 생겨놨다. Hedafirst Disign Pattern의 내용을 참조하여 일반적인 원칙을 설명하였다. 그 일반적인 개발원칙은 아래와 같다.

### 4.1 어플리케이션에서 달라지는 부분을 찾아내고 달라지지 않는 부분으로부터 분리시킨다.

외부의 영향에 의해 어플리케이션은 항상 변화 할 가능성을 가지고 있다. 이 변화에 의해 어플리케이션의 어느 부분이 변화하게 될 것이고 어느 부분이 변화하지 않을 것인지 판단하는 것은 설계의 과정에서 어려운 문제이면서 중요한 과제이다. 왜냐하면 외부의 영향에 의해서 어떤 부분이 변화하게 될지 완벽하게 예상할 수 없기 때문에 어려운 문제이기도 하지만 변화하게 되는 부분을 분리시켜 관리함으로써 변화에 대한 개발이 발생할 때 그 부분만 고치거나 확장 할 수 있기도 하기 때문이다. 그리고 이것이 설계의 첫단계이기도 하다.

### 4.2 구현이 아닌 인터페이스에 맞추어 프로그래밍한다.

여기서 구현이라함은 클래스에 행동들을 메소드로 직접 구현함을 의미한다. 인터페이스에 맞추어 프로그래밍한다는 의미는 클래스에 모든 행동을 구현하지 않고 클래스를 클라이언트로 상정하고 행동들을 인터페이스를 이용한 api로 구현하여 클라이언트 측에서는 인터페이스의 구현체를 모른체 호출 할 수 있도록 프로그래밍 하는 것을 의미한다. 이렇게 함으로써 클라이언트측 개발자는 특정행동에 대한 구현체를 분석할 필요 없이 행동의 기능만 알고 있다면 인터페이스를 통해서 호출 할 수 있다. 그리고 런타임시 다른 행동이 필요한 경우 인터페이스에 같은 타입의 다른 행동을 주입함으로써 행동을 바꿀 수 있다. 마지막으로 행동에 대한 확장이 필요한 경우 인터페이스를 구현함으로써 확장 할 수 있다.

### 4.3 상속보다 구성을 활용한다.

이미 구현되어 있는 메소드를 호출하는 방법에는 두 가지가 존재 할 수 있다. 상속 된 메소드를 호출하는 방법과 구성(composition)을 이용하여 호출하는 방법이다. 구성을 이용하여 호출하는 방법의 대표적인 예는 멤버 변수를 통한 호출이 있을 수 있다. 상속 된 메소드의 호출은 다형성이 없기 때문에 유연하지 않다. 해당 호출은 한가지의 행동으로만 구현되어 있다. 하지만 구성을 이용하여 호출하는 방법에는 다형성이 적용 될 수 있기 때문에 유연하다. 4.3 원칙은 사실 4.2의 확장 된 원칙이다. 왜냐하면 인터페이스를 사용하여 캡슐화 된 구현 클래스들은 해당 인터페이스 타입으로 호출 될 수 있기 때문이다.

### 4.4 서로 상호작용을 하는 객체 사이에서는 가능하면 느슨하게 결합하는 디자인을 사용해야한다.

느슨한 결합(loose coupling)이란 한 객체가 어떤 클래스타입에 의존한다고 할 때 클래스타입이 구체적인 구현클래스 타입이 아닌 추상적인 추상클래스나 인터페이스를 통해서 의존하는 것을 말한다. 구체적인 구현클래스 타입은 컴파일이 완료되면 호출시 제공되는 내용이 구현클래스에 국한되어 두 객체 관계 단단하게 결합되어 버린다. 하지만 추상적인 클래스 타입에 의존하면 컴파일이 완료된 후에도 추상클래스나 인터페이스의 구현체들로 범위가 확대되어 런타임시에 교체 될 수 있는 가능성이 생긴다. 이러한 객체들 사이의 관계를 느슨한 결합이라고 한다.
