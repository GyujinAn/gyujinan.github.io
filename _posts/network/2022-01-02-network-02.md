---
layout: post
title: "피지컬 계층의 통신"
date: 2022-01-02
categories: network
---


# 1. UTP(Unshielded Twisted-pair)케이블
하나의 노드에 또 다른 노드에게 전기 신호를 보내기 위해서는 케이블이 필요하다. UTP에서 U는 Unshielded 감싸지지 않았다를 의미하고 TP는 Twisted-pair 꼬였다는 의미이다. 실제로 집에 있는 랜선을 뜯어보면 8개의 줄들이 두개씩 꼬여있는 것을 확인 할 수 있을 것이다. 

케이블의 종류은 속도 종류 거리 와 세개지 정보를 통해서 구분된다. 예를 들어 10 Base 5와 같은 케이블에서 10은 케이블의 속도를 나타낸다 이는 10Mbps(Mega Bit Per Second)의 속도를 의미한다. 해당 케이블은 1초에 10 메가 피트의 데이터를 전송 할 수 있는데 케이블이다. 그리고 Base는 Baseband용 케이블을 의미한다. 케이블은 종료는 베이스밴드와 브로드 밴드(Broadband)가 존재하는데 베이스 밴드는 디지털 방식 브래도밴드는 아날로그 방식이다. 그리고 마지막의 5는 최대통신 거리를 나타내는데 이는 500미터를 의미한다 그러므로 10 Base 5 케이블은 10Mbps의 속도와 Base 방식으로 최대 500미터까지 통신 할 수 있는 케이블이다.


# 2. NIC(Network Interface Card) Card

노드들은 하나 이상의 NIC카드가 존재해야 다른 노드들과 통신을 할 수 있다. 하나의 NIC 카드에는 MAC주소라는 노드의 정체성을 나타내는 일련의 숫자들이 존재하는데 노드들은 특정노드의 정체성을 NIC의 맥주소를 통해서 확인하고 통신을 한다.

1.1 MAC(Media Access Control) 주소

맥주소는 전 세계에서 유일한 주소라서 모든 NIC카드의 맥주소는 하나만 존재 한다고 할 수 있다. 맥주소는 48bit의 숫자로 구성되어 있다. 이를 6octet의 숫자로 구성되어 있다고 말하기도 한다. 보통 48비트의 숫자를 8비트씩 나누어 16진수 수를 6개로 나태낸다. 이 중 앞의 세개의 수는 생상자를 나타내는 코드로 OUI(Organizational Unique Identifier)이라고 한다. 그리고 나머지 세개의 수는 메이케에서 각 장비에 분배되는 Host Identifier이다. 한 마디로 시리얼 넘버이다.

피지컬 계층에서 맥주소를 모르면 통신을 할 수 없다. 프레임의 헤더에 목적지 맥주소를 등록하여 해당 프레임의 어떤 노드로 통신을 보낼지 다른 통신 기기들에게 알려주기 때문이다. ip주소에 해당하는 맥주소를 모르는 경우가 발생 할 수 있는데 어때는 ARP(Address Resolution Protocol)이라는 프로토콜로 해당 네트워크에 존재하는 모든 NIC카드에 통신을 보냄으로써 ip에 해당하는 맥주소를 알아온다.

1.2 유니캐스트와 브로드캐스트 

NIC 카드가 설치되고 각 노드들이 케이블과 허브로 연결되면 유니케스트와 브로드캐스트라는 통신을 할 수있다. 유니 캐스트는 프레임의 목적지 주소에 특정 mac주소를 등록하여 통신한다. 그러면 해당 프레임은 자신의 네트워크에 연결되어 있는 모든 노드에 프레임을 보내는데 여기서 NIC 카드는 해당 프레임의 목적지 맥주소를 보고 자신과 비교한후 자신의 맥주소와 다르면 프레임을 폐기시켜버린다. 하지만 자신의 주소와 같은 경우는 cpu에 인터럽트를 요청하여 프레임의 내용이 노드로 들어 올 수 있도록한다. 

하지만 브로드 캐스트는 특정 맥 주소를 프레임이 보내지 않고 FFFF.FFFF.FFFF라는 주소를 프레임에 등록하여 모든 노드에게 통신을 보낸다. 그러면 네트워크상의 모든 노드에 있는 NIC 카드는 프레임의 맥주소를 보고 cpu에게 패킷을 처리 해줄 것을 요청한다. cpu는 패킷의 내용에 있는 ip주소가 자신의 ip주소 맞는지를 확인하고 처리하든가 다르다면 패킷을 폐기한다. 여기 브로드 캐스트는 cpu에게 무조건 요청을 보내기 때문에 유니캐스트 보다 네트워크 전체적으로 더 많이 비용이 발생한다는 문제가 있다. 이러한 브로드 캐스트 통신의 대표적인 예로는 ARP가 있다.

# 이더넷(Ethernet) 이란?

모든 통신에 기반이 되는 전기신호를 보내기 위한 네트워크 방식이 필요한다. 여러 방식(토큰링, FDDI, ATM방식들 여러 방식이 존재하지만 설명은 생략한다.) 중 대표적이고 가장 많이 보편화 되어 있는 방식이 이더넷 방식이다. 이더넷이 연결되어 있는 통신 기기들은 물리적인 전기신호(0 혹은 1)를 서로에게 보낼 수 있다. 이렇게 전기 신호를 보낼 수 있어야 상위 레벨의 정보들을 통신 할 수 있을 것이다.

이더넷은 CSMA/CD (Carrier Sense Multiple Access / Collision Detection)이라는 방법을 사용한다. Carrier Sense이란 통신 기기가 현재 자신의 네트워크에 통신이 발생하고 있는지를 감지하는 것이다. 기기는 통신이 발생하고 있는지 없는지를 감지하고 있다가 통신이 발생하지 않는다고 판단되면 자신이 보내야 되는 데이터를 보낸다. 여기서 Carrier란 네트워크 상에 존재하는 신호를 의미하고 Sence는 감지를 의미한다.

Carrier Sense를 하고 있는 통신 기기들은 통신이 발생하지 않는다고 판단 될 때 동시에 여러 기기들이 자신의 데이터를 보낼 수 있다. 즉, 통신 기기들이 통신을 보내는 순서가 따로 존재하지 않고 통신이 일어나지 않는다고 판단 될 때 언제라도 통신을 보낼 수 있다는 것 이다. 이러한 방식을 Multiple Access(다중 접근)이라고 한다.

Multiple Access 방식은 기기들의 통신 충돌을 발생 시킬 수 있다. 이러한 충돌을 콜리전(Collision)이라고 하는데 콜리전이 발생되면 통신 기기들은 감지를 하는데 이를 Collision Detection(충돌 감지)이라고 한다. Collision Detection이 발생하면 기기들은 랜덤한 시간동안 기다린 후에 다시 데이터을 보내도록 한다.





