---
layout: post
title: "스패닝 트리 프로토콜"
date: 2022-02-17
categories: network
---

# 스패닝 트리 프로토콜(Spanning Tree Protocol)

## 1. 스패닝 트리 프로토콜의 필요성

브로드캐스트를 구성하는 브리지간에 하나의 링크가 아닌 여러개의 링크로 구성되는 경우가 있다. 이는 물리적 장애에 대비하기 위한 Fault Tolerant이다. 이러한 브로드캐스트는 그래프 형태라고 할 수 있다. 그래프 형태의 브로드캐스트는 브로드캐스트 통신이 발생할 경우 루핑을 야기한다. 그러므로 그래프 형태의 브로드캐스트를 트리 형태로 바꿀 필요가 있다. 트리 형태의 브로드캐스트는 하나의 브리지에서 다른 브리지로 가는 링크가 하나이므로 루핑이 발생 할 수 없기 때문이다. 

## 2. 스패닝 트리 프로토콜이란?

 브리지 간의 통신에서 루핑이 발생하는 경우를 예방하기 위해서 물리적으로 그래프 형태를 하고 있는 브리지들을 논리적인 트리 형태로 바꾸어주는 프로토콜이다.

 ## 3. BPDU(Brige Protocol Data Unit) 

 브리지에 전원이 들어오게 되면 브리지는 스패닝 트리 형태를 구성하기 위해 자신과 연결 된 브리지들에게 2초에 한번씩 BPDU를 보낸다. BPDU의 구성은 아래와 같은 내용으로 되어있다.

 1) Root BID

BID(Brige ID)란 브리지의 정체성을 나타내는 숫자들의 조합니다. BID는 8바이트로 이루어져 있는데 그 중 2바이트는 브리지 우선순위(Brige Priority)와 6바이트의 맥 어드레스로 구성되어져 있다. 브리지 우선순위와 맥어드레스를 통해 어떤 기능을 하는지는 추후에 다루어보기로 한다. 트리에 루트가 존재하는 것 처럼 스패닝 트리 형태에서는 루트 브리지가 존재하는데 Root BID는 루트 브리지의 BID를 나타낸다.

 2) Root Path Cost

 Path Cost란

 3) Sender BID

 4) Port ID